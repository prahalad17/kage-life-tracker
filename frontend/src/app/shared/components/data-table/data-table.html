<div class="table-responsive">

  @if (config.create?.enabled) {
    <div class="table-header d-flex justify-content-between align-items-center mb-3">
      <h5 class="mb-0">{{config.tableName}}</h5>

      <button class="btn btn-primary" (click)="onCreateClick()">
        {{ config.create?.label || 'Create' }}
      </button>
    </div>
  }

  <table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
      <tr>
        @for (column of config.columns; track column.key) {
          <th>
            {{ column.header }}
          </th>
        }

        @if (config.actions?.length) {
          <th>Actions</th>
        }
      </tr>
    </thead>

    <tbody class="table-light">
      @for (row of rows; track row.id) {
        <tr>
          @for (column of config.columns; track column.key) {
            <td>
              {{ row[column.key] }}
            </td>
          }

          @if (config.actions?.length) {
            <td>
              @for (action of config.actions; track action.type) {

                @if(action.type === 'delete'){

                  <button
                  class="btn btn-sm btn-danger me-1"
                  (click)="onActionClick(action.type, row)">
                  <i class="bi bi-trash me-1"></i>
                  {{ action.label }}
                </button>

                }

                @else {
                  <button
                  class="btn btn-sm btn-outline-secondary me-1"
                  (click)="onActionClick(action.type, row)">
                  {{ action.label }}
                </button>

                }
                
              }
            </td>
          }
        </tr>
      }
    </tbody>
  </table>
  @if (config.pagination?.enabled) {

  <div class="d-flex justify-content-between align-items-center mt-3">

    <!-- Left Side: Showing Info -->
    <div class="text-muted small">
      Showing {{ startItem }}â€“{{ endItem }} of {{ totalElements }}
    </div>

    <!-- Right Side: Controls -->
    <div class="d-flex align-items-center gap-2">

      <!-- Page Size Dropdown -->
      <select
        class="form-select form-select-sm w-auto"
        [value]="pageSize"
        (change)="onPageSizeChange($any($event.target).value)">
        
        @for (size of config.pagination?.pageSizeOptions ?? [10,20,50]; track size) {
          <option [value]="size">{{ size }}</option>
        }

      </select>

      <!-- Previous Button -->
      <button
        class="btn btn-sm btn-outline-secondary"
        (click)="onPrevious()"
        [disabled]="pageIndex === 0 || loading">
        Previous
      </button>

      <!-- Next Button -->
      <button
        class="btn btn-sm btn-outline-secondary"
        (click)="onNext()"
        [disabled]="pageIndex >= totalPages - 1 || loading">
        Next
      </button>

    </div>
  </div>
}

</div>
