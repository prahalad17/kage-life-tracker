<div class="saas-table-card">

  @if (config.create?.enabled) {
    <div class="table-header">
      <h5>{{ config.tableName }}</h5>

      <button class="btn-primary-modern" (click)="onCreateClick()">
        {{ config.create?.label || 'Create' }}
      </button>
    </div>
  }

  <div class="table-scroll-container">
    <table class="saas-table">
      <thead>
        <tr>
          @for (column of config.columns; track column.key) {
            <th>{{ column.header }}</th>
          }

          @if (config.actions?.length) {
            <th class="actions-column">Actions</th>
          }
        </tr>
      </thead>

      <tbody>
        @for (row of rows; track row.id) {
          <tr>
            @for (column of config.columns; track column.key) {
              <td>{{ row[column.key] }}</td>
            }

            @if (config.actions?.length) {
              <td class="actions-cell">
                @for (action of config.actions; track action.type) {

                  @if (action.type === 'delete') {
                    <button
                      class="btn-danger-modern"
                      (click)="onActionClick(action.type, row)">
                      {{ action.label }}
                    </button>
                  }
                  @else {
                    <button
                      class="btn-ghost-modern"
                      (click)="onActionClick(action.type, row)">
                      {{ action.label }}
                    </button>
                  }

                }
              </td>
            }
          </tr>
        }
      </tbody>
    </table>
  </div>

  @if (config.pagination?.enabled) {
    <div class="pagination-bar">

      <div class="pagination-info">
        Showing <strong>{{ startItem }}</strong>
        –
        <strong>{{ endItem }}</strong>
        of
        <strong>{{ totalElements }}</strong>
      </div>

      <div class="pagination-controls">

        <select
          [value]="pageSize"
          (change)="onPageSizeChange(+($any($event.target).value))">
          @for (size of config.pagination?.pageSizeOptions ?? [10,20,50]; track size) {
            <option [value]="size">{{ size }} / page</option>
          }
        </select>

        <button
          (click)="onPrevious()"
          [disabled]="pageIndex === 0 || loading">
          ◀
        </button>

        <button
          (click)="onNext()"
          [disabled]="pageIndex >= totalPages - 1 || loading">
          ▶
        </button>

      </div>

    </div>
  }

</div>